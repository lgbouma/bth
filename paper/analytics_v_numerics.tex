\subsection{Numerical Approach}
\label{sec:numerical_methods}

Assuming a signal-to-noise limited survey, we would like to find the true
occurrence rate density, and also that inferred by an observer ignoring 
binarity.
Though analytic or semi-analytic solutions exist for each model, beyond Model 
\#2 the equations become burdensome. To maintain simplicity, we develop a 
Monte Carlo approach, which works as follows.

First, the user specifies the model class (\#1, 2, or 3) and various free 
parameters describing the stellar and planetary population.
Most importantly, these parameters include the binary fraction, and the true 
planet occurrence rates around single stars, primaries, and secondaries (the 
$\Lambda_i$'s, to be defined in Sec.~\ref{sec:analytic_preliminaries}).
                                                               
We then generate the population of selected stars.
Each selected star has a type (single, primary, secondary), 
a binary mass ratio (if it is not single), and the property of whether it 
is ``searchable''.               
The absolute number of stars is arbitrary.
The relative number of binaries to singles is calculated according to analytic
formulae. The binary mass ratios are sampled from the
appropriate magnitude-limited distributions.

Whether a star is ``searchable'' depends entirely on its ``completeness''
fraction. By ``completeness'', we mean the ratio of the actual number of 
searchable stars to the assumed number of searchable stars (for a given planet 
size, period, etc.).
Assuming homogeneously distributed stars, this is equivalent to the
ratio of the searchable to selected volumes.
For single stars, we assume these volumes are identical~--~exactly the case 
discussed by Pepper et al. (2003).
For binaries, this volume ratio is a function of only the binary mass ratio.

To assign planets, each selected star receives a planet at the initially 
specified rate, according to its type.
The radii of planets are assigned independently of any host system
property, as sampled from $p_r(r) \sim r^\delta$ for Model \#3 or a 
$\delta$--function 
for Models \#1 and \#2.
A planet is detected when a) it transits, and b) its host star is
searchable.

The probability of transiting single stars in our model is assumed to be known,
and so it is mostly corrected by the observer attempting to infer an
occurrence rate. The only bias is for secondaries, which can be smaller than 
primaries in Models \#2 and \#3.
This effect is included when computing the transit probability.

For detected planets, apparent radii are computed according to analytic
formulae that account for both dilution and the misclassification of stellar
radii. We assume that the observer think all transits are around single 
stars.

The rates are then computed in bins of true planet radius and apparent planet
radius.
In a given radius bin, the true rate is found by counting the number of planets
that exist around selected stars of all types (singles, primaries,
secondaries), and dividing by the total number of these stars.
The apparent rates are found by counting the number of detected planets that
were found in an apparent radius bin, dividing by the geometric transit
probability for single stars, and dividing by the apparent total number of
stars.
The simplest realization of this scheme is described analytically in 
Sec.~\ref{sec:model_1}, but we first clarify our terminology.
